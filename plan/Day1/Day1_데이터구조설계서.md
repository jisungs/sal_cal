# 📊 Day 1: 데이터 구조 설계서

## 1. 회사 정보 (기초정보 - P0)

### 1.1 데이터 구조

| 항목 | 타입 | 필수 | 설명 | 예시 |
|------|------|------|------|------|
| 회사명 | string | ✅ | 회사 또는 사업체명 | "㈜ABC컴퍼니" |
| 사업자등록번호 | string | ✅ | 사업자등록번호 (10자리) | "123-45-67890" |
| 대표자명 | string | ✅ | 대표자 이름 | "홍길동" |
| 주소 | string | ✅ | 회사 주소 | "서울시 강남구 테헤란로 123" |
| 연락처 | string | ✅ | 회사 전화번호 | "02-1234-5678" |
| 은행코드 | string | ✅ | 급여 이체용 은행 코드 | "004" (KB국민은행) |
| 계좌번호 | string | ✅ | 급여 이체용 계좌번호 | "123-456-789012" |

### 1.2 은행코드 마스터 데이터

| 은행코드 | 은행명 | 비고 |
|---------|--------|------|
| 002 | 산업은행 | |
| 003 | 기업은행 | |
| 004 | KB국민은행 | |
| 011 | NH농협은행 | |
| 020 | 우리은행 | |
| 023 | SC제일은행 | |
| 027 | 씨티은행 | |
| 032 | 대구은행 | |
| 034 | 광주은행 | |
| 037 | 전북은행 | |
| 039 | 경남은행 | |
| 045 | 새마을금고 | |
| 048 | 신협 | |
| 050 | 상호저축은행 | |
| 064 | 산림조합 | |
| 071 | 우체국 | |
| 081 | 하나은행 | |
| 088 | 신한은행 | |
| 090 | 카카오뱅크 | |
| 092 | 토스뱅크 | |

### 1.3 저장 형식
- **파일 형식**: JSON 또는 Excel
- **파일명**: `company_info.json` 또는 `company_info.xlsx`
- **위치**: `data/company_info.json`

---

## 2. 직원 정보 (입력 엑셀)

### 2.1 데이터 구조

| 컬럼명 | 타입 | 필수 | 설명 | 예시 |
|--------|------|------|------|------|
| 이름 | string | ✅ | 직원 이름 | "홍길동" |
| 주민번호 | string | ✅ | 주민번호 앞자리 (세금계산용) | "123456" |
| 입사일 | date | ✅ | YYYY-MM-DD 형식 | "2024-01-15" |
| 부양가족수 | integer | ✅ | 부양가족 수 (소득세 계산용) | 2 |
| 계좌번호 | string | ❌ | 급여 이체용 | "123-456-789012" |
| 기본급 | integer | ✅ | 월 기본급 (원) | 3000000 |
| 연장근무시간 | integer | ❌ | 시간당 단가 별도 입력 | 10 |
| 연장근무단가 | integer | ❌ | 기본급/일근무시간 * 1.5 권장 | 25000 |
| 상여금 | integer | ❌ | 상여금 금액 (원) | 500000 |
| 공제사항 | string | ❌ | 기타 공제 메모 | "식대 공제" |

### 2.2 데이터 제약 조건

#### 필수 컬럼 검증
- 이름: 최소 1자, 최대 50자
- 주민번호: 6자리 숫자 (앞자리만)
- 입사일: YYYY-MM-DD 형식, 유효한 날짜
- 부양가족수: 0 이상의 정수, 최대 10
- 기본급: 0 이상의 정수

#### 선택 컬럼 검증
- 계좌번호: 형식 검증 (하이픈 포함 가능)
- 연장근무시간: 0 이상의 정수
- 연장근무단가: 0 이상의 정수
- 상여금: 0 이상의 정수
- 공제사항: 최대 200자

### 2.3 계산 로직

#### 연장근무수당 계산
```
연장근무수당 = 연장근무시간 × 연장근무단가
```

#### 권장 연장근무단가
```
일근무시간 = 8시간 (기본값)
일급 = 기본급 / 20일 (월 20일 근무 기준)
시간급 = 일급 / 일근무시간
권장 연장근무단가 = 시간급 × 1.5
```

---

## 3. 4대보험 정보 (기초정보 - P0)

### 3.1 보험 요율 (2025년 기준)

| 보험 종류 | 요율 | 상한액 | 비고 |
|----------|------|--------|------|
| 국민연금 | 4.5% | 5,530,000원 | 월 소득 상한액 |
| 건강보험 | 3.545% | 5,530,000원 | 월 소득 상한액 |
| 장기요양 | 0.4591% | - | 건강보험의 12.95% |
| 고용보험 | 0.9% | 5,530,000원 | 월 소득 상한액 |

### 3.2 계산 로직

#### 국민연금
```
과세표준 = min(기본급, 국민연금_상한액)
국민연금 = int(과세표준 × 0.045)
```

#### 건강보험
```
과세표준 = min(기본급, 건강보험_상한액)
건강보험 = int(과세표준 × 0.03545)
```

#### 장기요양
```
장기요양 = int(건강보험 × 0.1295)
```

#### 고용보험
```
과세표준 = min(기본급, 고용보험_상한액)
고용보험 = int(과세표준 × 0.009)
```

---

## 4. 근로소득세액표 (기초정보 - P0)

### 4.1 간이세액표 구조

| 과세표준 구간 | 세율 | 누진공제 | 비고 |
|--------------|------|---------|------|
| 0원 ~ 1,200,000원 | 6% | 0원 | |
| 1,200,000원 ~ 4,600,000원 | 15% | 108,000원 | |
| 4,600,000원 ~ 8,800,000원 | 24% | 522,000원 | |
| 8,800,000원 ~ 15,000,000원 | 35% | 1,490,000원 | |
| 15,000,000원 이상 | 38% | 1,940,000원 | |

### 4.2 소득세 계산 로직

```
과세표준 = 총지급액 - (국민연금 + 건강보험 + 장기요양 + 고용보험)

소득세 = (과세표준 × 세율) - 누진공제
지방소득세 = int(소득세 × 0.10)
```

### 4.3 부양가족수별 공제

| 부양가족수 | 공제액 | 비고 |
|-----------|--------|------|
| 0명 | 0원 | |
| 1명 | 150,000원 | |
| 2명 | 300,000원 | |
| 3명 | 450,000원 | |
| 4명 이상 | 600,000원 | 최대 600,000원 |

**부양가족 공제 적용**
```
과세표준 = 총지급액 - 4대보험 - 부양가족공제
```

---

## 5. 급여명세서 출력 구조

### 5.1 지급 항목

| 항목 | 계산 방법 | 비고 |
|------|----------|------|
| 기본급 | 입력값 | |
| 연장근무수당 | 연장근무시간 × 연장근무단가 | |
| 상여금 | 입력값 | |
| 총 지급액 | 기본급 + 연장근무수당 + 상여금 | |

### 5.2 공제 항목

| 항목 | 계산 방법 | 비고 |
|------|----------|------|
| 국민연금 | min(기본급, 상한액) × 4.5% | |
| 건강보험 | min(기본급, 상한액) × 3.545% | |
| 장기요양 | 건강보험 × 12.95% | |
| 고용보험 | min(기본급, 상한액) × 0.9% | |
| 소득세 | (과세표준 × 세율) - 누진공제 | 부양가족수 반영 |
| 지방소득세 | 소득세 × 10% | |
| 총 공제액 | 모든 공제 항목 합계 | |

### 5.3 최종 항목

| 항목 | 계산 방법 |
|------|----------|
| 실수령액 | 총 지급액 - 총 공제액 |

---

## 6. 급여대장 출력 구조

### 6.1 레이아웃

| 컬럼 | 내용 |
|------|------|
| 번호 | 순번 |
| 이름 | 직원 이름 |
| 기본급 | 월 기본급 |
| 연장근무수당 | 연장근무수당 |
| 상여금 | 상여금 |
| 총 지급액 | 총 지급액 |
| 국민연금 | 국민연금 |
| 건강보험 | 건강보험 |
| 장기요양 | 장기요양 |
| 고용보험 | 고용보험 |
| 소득세 | 소득세 |
| 지방소득세 | 지방소득세 |
| 총 공제액 | 총 공제액 |
| 실수령액 | 실수령액 |

### 6.2 합계 및 통계

- 직원 수
- 총 지급액 합계
- 총 공제액 합계
- 총 실수령액 합계
- 평균 급여
- 평균 공제액

---

## 7. 데이터 저장 구조

### 7.1 파일 구조

```
payroll_generator/
├── data/
│   ├── company_info.json          # 회사 정보
│   ├── bank_codes.json            # 은행코드 마스터
│   ├── employees.xlsx             # 직원 정보 (입력)
│   └── payroll_history/           # 급여 이력
│       └── 2025-01/
│           ├── payroll_2025-01.xlsx
│           └── payslips/
│               ├── 홍길동_급여명세서_2025-01.xlsx
│               └── 홍길동_급여명세서_2025-01.pdf
```

### 7.2 JSON 구조 예시

#### company_info.json
```json
{
  "company_name": "㈜ABC컴퍼니",
  "business_number": "123-45-67890",
  "representative": "홍길동",
  "address": "서울시 강남구 테헤란로 123",
  "phone": "02-1234-5678",
  "bank_code": "004",
  "account_number": "123-456-789012"
}
```

#### bank_codes.json
```json
{
  "002": "산업은행",
  "003": "기업은행",
  "004": "KB국민은행",
  "011": "NH농협은행",
  "020": "우리은행",
  ...
}
```

---

## 8. 데이터 검증 규칙

### 8.1 필수 데이터 검증
- 회사 정보: 모든 필수 항목 입력 확인
- 직원 정보: 이름, 주민번호, 입사일, 부양가족수, 기본급 필수
- 날짜 형식: YYYY-MM-DD 형식 검증
- 숫자 형식: 정수 및 양수 검증

### 8.2 데이터 무결성 검증
- 주민번호 중복 확인
- 입사일이 현재 날짜보다 미래인지 확인
- 기본급이 0보다 큰지 확인
- 부양가족수가 0 이상인지 확인

---

**작성일**: 2025-01-XX  
**버전**: 1.0

