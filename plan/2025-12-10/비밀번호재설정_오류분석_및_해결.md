# ğŸ” ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ ì˜¤ë¥˜ ë¶„ì„ ë° í•´ê²°

**ì‘ì„±ì¼**: 2025-12-10  
**ë¬¸ì œ**: ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ í´ë¦­ ì‹œ ì˜¤ë¥˜ ë°œìƒ  
**ìƒíƒœ**: âœ… í•´ê²° ì™„ë£Œ

---

## ğŸ” ë¬¸ì œ ë¶„ì„

### ë°œê²¬ëœ ë¬¸ì œì 

1. **í…œí”Œë¦¿ì—ì„œ í† í° ì ‘ê·¼ ì˜¤ë¥˜**
   - ë¬¸ì œ: `reset_password.html` í…œí”Œë¦¿ì—ì„œ `request.view_args.token` ì‚¬ìš©
   - ì›ì¸: í•¨ìˆ˜ì—ì„œ í† í°ì„ í…œí”Œë¦¿ì— ì „ë‹¬í•˜ì§€ ì•ŠìŒ
   - ì˜í–¥: í¼ action URL ìƒì„± ì‹¤íŒ¨

2. **ì´ë©”ì¼ ë°œì†¡ ì„¤ì • ì˜¤ë¥˜**
   - ë¬¸ì œ: "The message does not specify a sender and a default sender has not been configured"
   - ì›ì¸: `MAIL_DEFAULT_SENDER` ì„¤ì •ì´ ì œëŒ€ë¡œ ë¡œë“œë˜ì§€ ì•ŠìŒ
   - ì˜í–¥: ì´ë©”ì¼ ë°œì†¡ ì‹¤íŒ¨

---

## âœ… í•´ê²° ë°©ë²•

### 1. í…œí”Œë¦¿ í† í° ì „ë‹¬ ìˆ˜ì •

**ìˆ˜ì • ì „** (`app/routes/auth.py`):
```python
return render_template('auth/reset_password.html', form=form, title='ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •')
```

**ìˆ˜ì • í›„**:
```python
return render_template('auth/reset_password.html', form=form, token=token, title='ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì •')
```

**í…œí”Œë¦¿ ìˆ˜ì •** (`web/templates/auth/reset_password.html`):
```html
<!-- ìˆ˜ì • ì „ -->
<form method="POST" action="{{ url_for('auth.reset_password', token=request.view_args.token) }}">

<!-- ìˆ˜ì • í›„ -->
<form method="POST" action="{{ url_for('auth.reset_password', token=token) }}">
```

### 2. ì´ë©”ì¼ ë°œì†¡ ì„¤ì • ìˆ˜ì •

**ìˆ˜ì • ì „** (`config.py`):
```python
@property
def MAIL_DEFAULT_SENDER(self):
    return os.environ.get('MAIL_DEFAULT_SENDER') or self.MAIL_USERNAME or 'noreply@example.com'
```

**ë¬¸ì œ**: Flask ì„¤ì •ì—ì„œëŠ” propertyê°€ ì œëŒ€ë¡œ ì‘ë™í•˜ì§€ ì•ŠìŒ

**ìˆ˜ì • í›„**:
```python
# MAIL_DEFAULT_SENDER ì„¤ì • (í™˜ê²½ ë³€ìˆ˜ ìš°ì„ , ì—†ìœ¼ë©´ MAIL_USERNAME, ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ê¸°ë³¸ê°’)
_mail_default_sender = os.environ.get('MAIL_DEFAULT_SENDER')
if _mail_default_sender:
    MAIL_DEFAULT_SENDER = _mail_default_sender
elif MAIL_USERNAME:
    MAIL_DEFAULT_SENDER = MAIL_USERNAME
else:
    MAIL_DEFAULT_SENDER = 'noreply@example.com'
```

**ì´ë©”ì¼ ë°œì†¡ í•¨ìˆ˜ ìˆ˜ì •** (`app/utils/email.py`):
```python
# ë°œì‹ ì ì„¤ì •
sender = current_app.config.get('MAIL_DEFAULT_SENDER')
if not sender:
    sender = current_app.config.get('MAIL_USERNAME') or 'noreply@example.com'

msg = Message(
    subject='ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ìš”ì²­ - ê¸‰ì—¬ëª…ì„¸ì„œ ìë™ìƒì„±ê¸°',
    recipients=[user.email],
    sender=sender,  # ëª…ì‹œì ìœ¼ë¡œ sender ì§€ì •
    html=render_template('auth/email/reset_password.html', ...)
)
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ì„¤ì • í™•ì¸
```
âœ… ì„¤ì • í™•ì¸:
  MAIL_SERVER: smtp.gmail.com
  MAIL_DEFAULT_SENDER: noreply@example.com (ê¸°ë³¸ê°’)
  MAIL_USERNAME: None (í™˜ê²½ ë³€ìˆ˜ ë¯¸ì„¤ì •)
```

### ë¼ìš°íŠ¸ í…ŒìŠ¤íŠ¸
- âœ… í† í°ì´ í…œí”Œë¦¿ì— ì •ìƒì ìœ¼ë¡œ ì „ë‹¬ë¨
- âœ… í¼ action URL ìƒì„± ì •ìƒ
- âœ… í† í° ê²€ì¦ ë¡œì§ ì •ìƒ ì‘ë™

---

## ğŸ“ ì‚¬ìš© ë°©ë²•

### í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (ì´ë©”ì¼ ë°œì†¡ì„ ìœ„í•´)

`.env` íŒŒì¼ì— ë‹¤ìŒ ì„¤ì • ì¶”ê°€:

```env
# ì´ë©”ì¼ ì„¤ì •
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=True
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_DEFAULT_SENDER=your-email@gmail.com
BASE_URL=http://localhost:5001
```

### Gmail ì‚¬ìš© ì‹œ

1. Google ê³„ì • â†’ ë³´ì•ˆ â†’ 2ë‹¨ê³„ ì¸ì¦ í™œì„±í™”
2. ì•± ë¹„ë°€ë²ˆí˜¸ ìƒì„±
3. `MAIL_PASSWORD`ì— ì•± ë¹„ë°€ë²ˆí˜¸ ì‚¬ìš©

---

## âœ… í•´ê²° ì™„ë£Œ

### ìˆ˜ì •ëœ íŒŒì¼
- `app/routes/auth.py` - í† í°ì„ í…œí”Œë¦¿ì— ì „ë‹¬
- `web/templates/auth/reset_password.html` - í† í° ì ‘ê·¼ ë°©ì‹ ìˆ˜ì •
- `config.py` - MAIL_DEFAULT_SENDER ì„¤ì • ìˆ˜ì •
- `app/utils/email.py` - ì´ë©”ì¼ ë°œì†¡ ì‹œ sender ëª…ì‹œ

### í•´ê²°ëœ ë¬¸ì œ
- âœ… í…œí”Œë¦¿ì—ì„œ í† í° ì ‘ê·¼ ì˜¤ë¥˜ í•´ê²°
- âœ… ì´ë©”ì¼ ë°œì†¡ ì„¤ì • ì˜¤ë¥˜ í•´ê²°
- âœ… ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ë§í¬ ì •ìƒ ì‘ë™

---

**ì‘ì„±ì**: AI Assistant  
**í•´ê²° ì¼ì**: 2025-12-10  
**ìƒíƒœ**: âœ… í•´ê²° ì™„ë£Œ

