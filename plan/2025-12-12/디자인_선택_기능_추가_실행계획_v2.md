# ğŸ¨ ê¸‰ì—¬ëª…ì„¸ì„œ ë””ìì¸ ì„ íƒ ê¸°ëŠ¥ ì¶”ê°€ ì‹¤í–‰ê³„íš (v2.0 - ì‹¤í˜„ ê°€ëŠ¥ ë²„ì „)

**ì‘ì„±ì¼**: 2025-12-12  
**ë²„ì „**: 2.0 (í”„ë¡œ ê°œë°œì ê´€ì  ê°œì„ )  
**ëª©í‘œ**: ì‚¬ìš©ìê°€ ë‘ ê°€ì§€ ê¸‰ì—¬ëª…ì„¸ì„œ ë””ìì¸ ì¤‘ ì„ íƒí•˜ì—¬ ì¶œë ¥í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ ì¶”ê°€  
**ì›ì¹™**: ê¸°ì¡´ ê¸°ëŠ¥ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ê¸°ëŠ¥ ì—…ê·¸ë ˆì´ë“œ, ì‹¤í˜„ ê°€ëŠ¥í•œ ê¸°ìˆ  ìŠ¤íƒ ì‚¬ìš©

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

### ëª©í‘œ
ì‚¬ìš©ìê°€ ì œê³µëœ ë‘ ê°€ì§€ ê¸‰ì—¬ëª…ì„¸ì„œ ë””ìì¸ ìƒ˜í”Œ(`ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png`, `ê¸‰ì—¬ëª…ì„¸ì„œ_sample2.png`) ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬ ê¸‰ì—¬ëª…ì„¸ì„œë¥¼ ì¶œë ¥í•  ìˆ˜ ìˆë„ë¡ ê¸°ëŠ¥ ì¶”ê°€

### í•µì‹¬ ì›ì¹™
- âœ… **ê¸°ì¡´ ê¸°ëŠ¥ ë³´ì¡´**: í˜„ì¬ ë™ì‘í•˜ëŠ” ëª¨ë“  ê¸°ëŠ¥ì€ ê·¸ëŒ€ë¡œ ìœ ì§€
- âœ… **í•˜ìœ„ í˜¸í™˜ì„±**: ë””ìì¸ ì„ íƒ ì—†ì´ë„ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ ë™ì‘ ê°€ëŠ¥
- âœ… **ì‹¤í˜„ ê°€ëŠ¥ì„±**: í˜„ì¬ ê¸°ìˆ  ìŠ¤íƒ(reportlab, openpyxl)ë§Œ ì‚¬ìš©
- âœ… **ìœ ì§€ë³´ìˆ˜ì„±**: ì„¤ì • ê¸°ë°˜ ë””ìì¸ ê´€ë¦¬ë¡œ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”
- âœ… **í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„±**: ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ë° í†µí•© í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ êµ¬ì¡°

---

## ğŸ” í˜„ì¬ ê¸°ìˆ  ìŠ¤íƒ ë¶„ì„

### ì‚¬ìš© ì¤‘ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- **PDF ìƒì„±**: `reportlab` (ì´ë¯¸ ì‚¬ìš© ì¤‘)
- **ì—‘ì…€ ì²˜ë¦¬**: `openpyxl` (ì´ë¯¸ ì‚¬ìš© ì¤‘)
- **ë°ì´í„° ì²˜ë¦¬**: `pandas` (ì´ë¯¸ ì‚¬ìš© ì¤‘)

### í˜„ì¬ PDF ìƒì„± ë°©ì‹
- `reportlab`ì˜ `canvas.Canvas`ë¥¼ ì‚¬ìš©í•œ ì½”ë“œ ê¸°ë°˜ ìƒì„±
- ë ˆì´ì•„ì›ƒ, ìƒ‰ìƒ, í°íŠ¸ ë“±ì´ ì½”ë“œì— í•˜ë“œì½”ë”©ë¨
- í•œê¸€ í°íŠ¸ ì§€ì› (NanumGothic)

### ì œì•½ ì‚¬í•­ ë° í•´ê²° ë°©ì•ˆ

#### âŒ ë¬¸ì œ: ì—‘ì…€â†’PDF ë³€í™˜ì˜ ë³µì¡ì„±
- **ë¬¸ì œì **: 
  - í”Œë«í¼ ì˜ì¡´ì„± (Windows: win32com, macOS/Linux: LibreOffice)
  - ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í•„ìš”
  - ë°°í¬ í™˜ê²½ì—ì„œ ì™¸ë¶€ í”„ë¡œê·¸ë¨ ì˜ì¡´ì„±

#### âœ… í•´ê²°: reportlab ì§ì ‘ êµ¬í˜„ (ê¶Œì¥)
- **ì¥ì **:
  - í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë§Œ ì‚¬ìš©
  - í”Œë«í¼ ë…ë¦½ì 
  - ì™„ì „í•œ ì œì–´ ê°€ëŠ¥
  - ë°°í¬ ì‹œ ì¶”ê°€ ì˜ì¡´ì„± ì—†ìŒ

---

## ğŸ¯ ì‹¤í˜„ ê°€ëŠ¥í•œ êµ¬í˜„ ì „ëµ

### ì „ëµ: Strategy íŒ¨í„´ + ì„¤ì • ê¸°ë°˜ ë””ìì¸ ê´€ë¦¬

#### 1. ë””ìì¸ ìŠ¤í™ì„ ì„¤ì • íŒŒì¼ë¡œ ê´€ë¦¬
- YAML ë˜ëŠ” JSONìœ¼ë¡œ ë””ìì¸ ìŠ¤í™ ì •ì˜
- ìƒ‰ìƒ, í°íŠ¸, ë ˆì´ì•„ì›ƒ ìœ„ì¹˜ ë“±ì„ ì„¤ì • íŒŒì¼ë¡œ ê´€ë¦¬
- ì½”ë“œ ìˆ˜ì • ì—†ì´ ë””ìì¸ ìˆ˜ì • ê°€ëŠ¥

#### 2. reportlabìœ¼ë¡œ ì§ì ‘ êµ¬í˜„
- ì—‘ì…€ í…œí”Œë¦¿ ëŒ€ì‹  reportlabìœ¼ë¡œ ì§ì ‘ êµ¬í˜„
- ì„¤ì • íŒŒì¼ì˜ ìŠ¤í™ì„ ì½ì–´ì„œ PDF ìƒì„±
- ì—‘ì…€ë„ ë™ì¼í•œ ì„¤ì •ìœ¼ë¡œ ìƒì„±

#### 3. ì ì§„ì  êµ¬í˜„
- Phase 1: ê¸°ë³¸ êµ¬ì¡° êµ¬ì¶•
- Phase 2: ë””ìì¸ 1 êµ¬í˜„
- Phase 3: ë””ìì¸ 2 êµ¬í˜„
- ê° ë‹¨ê³„ë³„ë¡œ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

---

## ğŸ“ ì•„í‚¤í…ì²˜ ì„¤ê³„ (ì‹¤í˜„ ê°€ëŠ¥ ë²„ì „)

### 1. ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
payroll_generator/
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ designs/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ base_design.py          # ê¸°ë³¸ ë””ìì¸ í´ë˜ìŠ¤
â”‚   â”‚   â”œâ”€â”€ design_1.py             # ë””ìì¸ 1 êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ design_2.py             # ë””ìì¸ 2 êµ¬í˜„
â”‚   â”‚   â”œâ”€â”€ design_factory.py       # íŒ©í† ë¦¬ í´ë˜ìŠ¤
â”‚   â”‚   â””â”€â”€ configs/                # ë””ìì¸ ì„¤ì • íŒŒì¼
â”‚   â”‚       â”œâ”€â”€ design_1.yaml       # ë””ìì¸ 1 ìŠ¤í™
â”‚   â”‚       â””â”€â”€ design_2.yaml       # ë””ìì¸ 2 ìŠ¤í™
â”‚   â””â”€â”€ payroll_template.xlsx       # ê¸°ì¡´ í…œí”Œë¦¿ (ìœ ì§€)
```

### 2. ì„¤ì • ê¸°ë°˜ ë””ìì¸ ìŠ¤í™ êµ¬ì¡°

#### design_1.yaml ì˜ˆì‹œ
```yaml
design_name: "ë””ìì¸ 1"
description: "ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png ê¸°ë°˜"

# í˜ì´ì§€ ì„¤ì •
page:
  size: "A4"
  margins:
    top: 30
    bottom: 20
    left: 30
    right: 30
    unit: "mm"

# í°íŠ¸ ì„¤ì •
fonts:
  title:
    name: "NanumGothic"
    size: 22
    bold: true
    color: [0, 0, 0]
  header:
    name: "NanumGothic"
    size: 12
    bold: true
    color: [1, 1, 1]  # í°ìƒ‰
  body:
    name: "NanumGothic"
    size: 10
    bold: false
    color: [0, 0, 0]

# ìƒ‰ìƒ ì„¤ì •
colors:
  title_bg: [0.95, 0.95, 0.95]  # ì—°í•œ íšŒìƒ‰
  header_bg: [0.2, 0.4, 0.8]    # íŒŒë€ìƒ‰
  total_bg: [0.9, 0.95, 1.0]     # ì—°í•œ íŒŒë€ìƒ‰
  border: [0.7, 0.7, 0.7]        # íšŒìƒ‰ í…Œë‘ë¦¬

# ë ˆì´ì•„ì›ƒ ì„¤ì •
layout:
  title:
    y: 280  # mm ë‹¨ìœ„, ìƒë‹¨ì—ì„œ
    height: 20
    align: "center"
  employee_info:
    y: 250
    height: 50
    fields:
      - name: "ì´ë¦„"
        y_offset: 0
      - name: "ì£¼ë¯¼ë²ˆí˜¸"
        y_offset: -12
      - name: "ì…ì‚¬ì¼"
        y_offset: -24
  payment_section:
    y: 190
    header_height: 8
    row_height: 10
    fields:
      - name: "ê¸°ë³¸ê¸‰"
        y_offset: 0
      - name: "ì—°ì¥ê·¼ë¬´ìˆ˜ë‹¹"
        y_offset: -10
      - name: "ìƒì—¬ê¸ˆ"
        y_offset: -20
      - name: "ì´ì§€ê¸‰ì•¡"
        y_offset: -30
        is_total: true
  deduction_section:
    y: 140
    header_height: 8
    row_height: 10
    fields:
      - name: "êµ­ë¯¼ì—°ê¸ˆ"
        y_offset: 0
      - name: "ê±´ê°•ë³´í—˜"
        y_offset: -10
      - name: "ì¥ê¸°ìš”ì–‘"
        y_offset: -20
      - name: "ê³ ìš©ë³´í—˜"
        y_offset: -30
      - name: "ì†Œë“ì„¸"
        y_offset: -40
      - name: "ì§€ë°©ì†Œë“ì„¸"
        y_offset: -50
      - name: "ì´ê³µì œì•¡"
        y_offset: -60
        is_total: true
  net_pay:
    y: 50
    height: 15
```

### 3. í´ë˜ìŠ¤ êµ¬ì¡° (ì‹¤ì œ êµ¬í˜„ ê°€ëŠ¥)

```python
# base_design.py
from abc import ABC, abstractmethod
import yaml
from pathlib import Path

class BaseDesign(ABC):
    """ë””ìì¸ í…œí”Œë¦¿ ê¸°ë³¸ í´ë˜ìŠ¤"""
    
    def __init__(self, config_path):
        """ì„¤ì • íŒŒì¼ ë¡œë“œ"""
        self.config = self._load_config(config_path)
        self.font_name = 'NanumGothic'  # ê¸°ë³¸ í°íŠ¸
    
    def _load_config(self, config_path):
        """YAML ì„¤ì • íŒŒì¼ ë¡œë“œ"""
        with open(config_path, 'r', encoding='utf-8') as f:
            return yaml.safe_load(f)
    
    @abstractmethod
    def generate_pdf(self, payroll_data, employee_data, output_path, period):
        """PDF ìƒì„±"""
        pass
    
    @abstractmethod
    def generate_excel(self, payroll_data, employee_data, output_path, period):
        """ì—‘ì…€ ìƒì„±"""
        pass
    
    def format_currency(self, amount):
        """í†µí™” í¬ë§·íŒ…"""
        return f"{amount:,}ì›"
    
    def mask_resident_number(self, rrn):
        """ì£¼ë¯¼ë²ˆí˜¸ ë§ˆìŠ¤í‚¹"""
        from ..utils import mask_resident_number as mask_rrn
        return mask_rrn(rrn)

# design_1.py
from reportlab.lib.pagesizes import A4
from reportlab.pdfgen import canvas
from reportlab.lib.units import mm
from .base_design import BaseDesign

class Design1(BaseDesign):
    """ë””ìì¸ 1: ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png ê¸°ë°˜"""
    
    def __init__(self):
        config_path = Path(__file__).parent / 'configs' / 'design_1.yaml'
        super().__init__(config_path)
    
    def generate_pdf(self, payroll_data, employee_data, output_path, period):
        """ë””ìì¸ 1 ìŠ¤íƒ€ì¼ë¡œ PDF ìƒì„±"""
        from ..utils import normalize_path
        
        output_path = normalize_path(output_path)
        c = canvas.Canvas(output_path, pagesize=A4)
        width, height = A4
        
        # ì„¤ì •ì—ì„œ ë ˆì´ì•„ì›ƒ ì •ë³´ ì½ê¸°
        page_config = self.config['page']
        layout = self.config['layout']
        
        # ì œëª© ì˜ì—­
        self._draw_title(c, width, height, period, layout['title'])
        
        # ì§ì› ì •ë³´ ì˜ì—­
        self._draw_employee_info(c, width, height, employee_data, layout['employee_info'])
        
        # ì§€ê¸‰ í•­ëª© ì˜ì—­
        self._draw_payment_section(c, width, height, payroll_data, layout['payment_section'])
        
        # ê³µì œ í•­ëª© ì˜ì—­
        self._draw_deduction_section(c, width, height, payroll_data, layout['deduction_section'])
        
        # ì‹¤ìˆ˜ë ¹ì•¡ ì˜ì—­
        self._draw_net_pay(c, width, height, payroll_data, layout['net_pay'])
        
        c.save()
        return output_path
    
    def _draw_title(self, canvas, width, height, period, config):
        """ì œëª© ì˜ì—­ ê·¸ë¦¬ê¸°"""
        colors = self.config['colors']
        fonts = self.config['fonts']
        
        # ì œëª© ë°°ê²½
        canvas.setFillColorRGB(*colors['title_bg'])
        canvas.rect(
            config['left'] * mm,
            height - config['y'] * mm - config['height'] * mm,
            width - (config['left'] + config['right']) * mm,
            config['height'] * mm,
            fill=1, stroke=0
        )
        
        # ì œëª© í…ìŠ¤íŠ¸
        canvas.setFillColorRGB(*fonts['title']['color'])
        canvas.setFont(self.font_name, fonts['title']['size'])
        canvas.drawString(
            config['left'] * mm + 10 * mm,
            height - config['y'] * mm - 15 * mm,
            "ê¸‰ì—¬ëª…ì„¸ì„œ"
        )
        
        # ê¸°ê°„
        canvas.setFont(self.font_name, 11)
        canvas.drawString(
            config['left'] * mm + 10 * mm,
            height - config['y'] * mm - 30 * mm,
            f"ì§€ê¸‰ê¸°ê°„: {period}"
        )
    
    # ... ë‚˜ë¨¸ì§€ ë©”ì„œë“œ êµ¬í˜„
    
    def generate_excel(self, payroll_data, employee_data, output_path, period):
        """ë””ìì¸ 1 ìŠ¤íƒ€ì¼ë¡œ ì—‘ì…€ ìƒì„±"""
        import openpyxl
        from openpyxl.styles import Font, Alignment, PatternFill, Border, Side
        
        wb = openpyxl.Workbook()
        ws = wb.active
        
        # ì„¤ì •ì—ì„œ ìŠ¤íƒ€ì¼ ì •ë³´ ì½ê¸°
        colors = self.config['colors']
        fonts = self.config['fonts']
        
        # ì œëª©
        ws['A1'] = "ê¸‰ì—¬ëª…ì„¸ì„œ"
        ws['A1'].font = Font(name=fonts['title']['name'], 
                            size=fonts['title']['size'], 
                            bold=fonts['title']['bold'])
        ws['A1'].fill = PatternFill(start_color=self._rgb_to_hex(colors['title_bg']),
                                   end_color=self._rgb_to_hex(colors['title_bg']),
                                   fill_type='solid')
        
        # ... ë‚˜ë¨¸ì§€ êµ¬í˜„
        
        wb.save(output_path)
        return output_path
    
    def _rgb_to_hex(self, rgb):
        """RGB íŠœí”Œì„ HEX ìƒ‰ìƒ ì½”ë“œë¡œ ë³€í™˜"""
        return '{:02X}{:02X}{:02X}'.format(
            int(rgb[0] * 255),
            int(rgb[1] * 255),
            int(rgb[2] * 255)
        )
```

---

## ğŸ”§ êµ¬í˜„ ë‹¨ê³„ (ì‹¤í˜„ ê°€ëŠ¥ ë²„ì „)

### Phase 0: ì¤€ë¹„ ì‘ì—… (1-2ì‹œê°„)

#### 0.1 ìƒ˜í”Œ ì´ë¯¸ì§€ ë¶„ì„ ë° ìŠ¤í™ ì •ì˜
- [ ] `ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png` ìƒì„¸ ë¶„ì„
  - ë ˆì´ì•„ì›ƒ êµ¬ì¡° íŒŒì•…
  - ìƒ‰ìƒ ì½”ë“œ ì¶”ì¶œ (RGB ê°’)
  - í°íŠ¸ í¬ê¸° ì¸¡ì •
  - ê°„ê²© ë° ì—¬ë°± ì¸¡ì •
- [ ] `ê¸‰ì—¬ëª…ì„¸ì„œ_sample2.png` ìƒì„¸ ë¶„ì„
  - ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ë¶„ì„
- [ ] ë””ìì¸ ìŠ¤í™ ë¬¸ì„œ ì‘ì„±
  - ê° ë””ìì¸ì˜ ë ˆì´ì•„ì›ƒ êµ¬ì¡°ë„
  - ìƒ‰ìƒ íŒ”ë ˆíŠ¸
  - í°íŠ¸ ìŠ¤í™
  - ê°„ê²© ë° ì—¬ë°± ê°’

#### 0.2 ì„¤ì • íŒŒì¼ ìƒì„±
- [ ] `design_1.yaml` ìƒì„±
  - ìƒ˜í”Œ ì´ë¯¸ì§€ ë¶„ì„ ê²°ê³¼ë¥¼ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±
  - ë ˆì´ì•„ì›ƒ ìœ„ì¹˜, ìƒ‰ìƒ, í°íŠ¸ ë“± ëª¨ë“  ìŠ¤í™ ì •ì˜
- [ ] `design_2.yaml` ìƒì„±
  - ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ ì‘ì„±

**ì‚°ì¶œë¬¼**:
- `design_1_spec.md`: ë””ìì¸ 1 ìƒì„¸ ìŠ¤í™ ë¬¸ì„œ
- `design_2_spec.md`: ë””ìì¸ 2 ìƒì„¸ ìŠ¤í™ ë¬¸ì„œ
- `configs/design_1.yaml`: ë””ìì¸ 1 ì„¤ì • íŒŒì¼
- `configs/design_2.yaml`: ë””ìì¸ 2 ì„¤ì • íŒŒì¼

---

### Phase 1: ê¸°ë³¸ êµ¬ì¡° êµ¬ì¶• (2-3ì‹œê°„)

#### 1.1 ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
```bash
mkdir -p payroll_generator/templates/designs/configs
touch payroll_generator/templates/designs/__init__.py
```

#### 1.2 ê¸°ë³¸ í´ë˜ìŠ¤ êµ¬í˜„
- [ ] `base_design.py` ìƒì„±
  - `BaseDesign` ì¶”ìƒ í´ë˜ìŠ¤ êµ¬í˜„
  - ì„¤ì • íŒŒì¼ ë¡œë“œ ê¸°ëŠ¥
  - ê³µí†µ ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ
  - ì¶”ìƒ ë©”ì„œë“œ ì •ì˜ (`generate_pdf`, `generate_excel`)

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# base_design.py
from abc import ABC, abstractmethod
import yaml
from pathlib import Path
import os

class BaseDesign(ABC):
    """ë””ìì¸ í…œí”Œë¦¿ ê¸°ë³¸ í´ë˜ìŠ¤"""
    
    def __init__(self, config_path=None):
        """ì´ˆê¸°í™”"""
        if config_path:
            self.config = self._load_config(config_path)
        else:
            self.config = {}
        self.font_name = self._get_font_name()
    
    def _load_config(self, config_path):
        """YAML ì„¤ì • íŒŒì¼ ë¡œë“œ"""
        try:
            from ..utils import resource_path
            config_path = resource_path(f'templates/designs/configs/{Path(config_path).name}')
        except:
            config_path = os.path.join(
                os.path.dirname(__file__), 'configs', Path(config_path).name
            )
        
        if not os.path.exists(config_path):
            raise FileNotFoundError(f"ì„¤ì • íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {config_path}")
        
        with open(config_path, 'r', encoding='utf-8') as f:
            return yaml.safe_load(f)
    
    def _get_font_name(self):
        """ì‚¬ìš© ê°€ëŠ¥í•œ í•œê¸€ í°íŠ¸ ì´ë¦„ ë°˜í™˜"""
        # ê¸°ì¡´ PDFGeneratorì™€ ë™ì¼í•œ ë¡œì§
        return 'NanumGothic'  # ë˜ëŠ” 'Helvetica' (í´ë°±)
    
    @abstractmethod
    def generate_pdf(self, payroll_data, employee_data, output_path, period):
        """PDF ìƒì„± - í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„"""
        pass
    
    @abstractmethod
    def generate_excel(self, payroll_data, employee_data, output_path, period):
        """ì—‘ì…€ ìƒì„± - í•˜ìœ„ í´ë˜ìŠ¤ì—ì„œ êµ¬í˜„"""
        pass
    
    def format_currency(self, amount):
        """í†µí™” í¬ë§·íŒ…"""
        return f"{amount:,}ì›"
    
    def mask_resident_number(self, rrn):
        """ì£¼ë¯¼ë²ˆí˜¸ ë§ˆìŠ¤í‚¹"""
        try:
            from ..utils import mask_resident_number as mask_rrn
        except ImportError:
            from utils import mask_resident_number as mask_rrn
        return mask_rrn(rrn)
    
    def get_config_value(self, *keys, default=None):
        """ì„¤ì • ê°’ ê°€ì ¸ì˜¤ê¸° (ì¤‘ì²©ëœ í‚¤ ì§€ì›)"""
        value = self.config
        for key in keys:
            if isinstance(value, dict):
                value = value.get(key)
            else:
                return default
            if value is None:
                return default
        return value
```

#### 1.3 ë””ìì¸ íŒ©í† ë¦¬ êµ¬í˜„
- [ ] `design_factory.py` ìƒì„±
  - `DesignFactory` í´ë˜ìŠ¤ êµ¬í˜„
  - ë””ìì¸ ë“±ë¡ ë° ì¡°íšŒ ê¸°ëŠ¥
  - ì‹±ê¸€í†¤ íŒ¨í„´ ë˜ëŠ” ì •ì  ë©”ì„œë“œ ì‚¬ìš©

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# design_factory.py
from .design_1 import Design1
from .design_2 import Design2

class DesignFactory:
    """ë””ìì¸ íŒ©í† ë¦¬ í´ë˜ìŠ¤"""
    
    _designs = {
        'default': None,  # ê¸°ì¡´ ë°©ì‹
        'design_1': Design1,
        'design_2': Design2,
    }
    
    _instances = {}  # ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤ ìºì‹œ
    
    @classmethod
    def get_design(cls, design_name='default'):
        """ë””ìì¸ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜"""
        if design_name == 'default' or design_name is None:
            return None
        
        if design_name not in cls._designs:
            import logging
            logger = logging.getLogger(__name__)
            logger.warning(f"ì•Œ ìˆ˜ ì—†ëŠ” ë””ìì¸: {design_name}, ê¸°ë³¸ ë°©ì‹ ì‚¬ìš©")
            return None
        
        # ì‹±ê¸€í†¤ íŒ¨í„´ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ì¬ì‚¬ìš©
        if design_name not in cls._instances:
            design_class = cls._designs[design_name]
            try:
                cls._instances[design_name] = design_class()
            except Exception as e:
                import logging
                logger = logging.getLogger(__name__)
                logger.error(f"ë””ìì¸ ìƒì„± ì‹¤íŒ¨: {design_name}, {e}")
                return None
        
        return cls._instances[design_name]
    
    @classmethod
    def list_available_designs(cls):
        """ì‚¬ìš© ê°€ëŠ¥í•œ ë””ìì¸ ëª©ë¡ ë°˜í™˜"""
        return list(cls._designs.keys())
    
    @classmethod
    def register_design(cls, name, design_class):
        """ìƒˆ ë””ìì¸ ë“±ë¡ (í™•ì¥ìš©)"""
        cls._designs[name] = design_class
```

#### 1.4 ì˜ì¡´ì„± ì¶”ê°€
- [ ] `requirements.txt`ì— `PyYAML` ì¶”ê°€ (ì„¤ì • íŒŒì¼ íŒŒì‹±ìš©)
  ```bash
  pip install PyYAML
  ```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„

---

### Phase 2: ë””ìì¸ 1 êµ¬í˜„ (4-6ì‹œê°„)

#### 2.1 ì„¤ì • íŒŒì¼ ì‘ì„±
- [ ] `configs/design_1.yaml` ì‘ì„±
  - ìƒ˜í”Œ ì´ë¯¸ì§€ ë¶„ì„ ê²°ê³¼ë¥¼ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±
  - ëª¨ë“  ë ˆì´ì•„ì›ƒ, ìƒ‰ìƒ, í°íŠ¸ ì •ë³´ í¬í•¨

#### 2.2 ë””ìì¸ 1 í´ë˜ìŠ¤ êµ¬í˜„
- [ ] `design_1.py` ìƒì„±
- [ ] `Design1` í´ë˜ìŠ¤ êµ¬í˜„
  - `BaseDesign` ìƒì†
  - ì„¤ì • íŒŒì¼ ë¡œë“œ
  - `generate_pdf()` ë©”ì„œë“œ êµ¬í˜„
    - reportlabì„ ì‚¬ìš©í•œ ë ˆì´ì•„ì›ƒ êµ¬í˜„
    - ì„¤ì • íŒŒì¼ì˜ ìŠ¤í™ì„ ì½ì–´ì„œ ë™ì ìœ¼ë¡œ ìƒì„±
  - `generate_excel()` ë©”ì„œë“œ êµ¬í˜„
    - openpyxlì„ ì‚¬ìš©í•œ ë ˆì´ì•„ì›ƒ êµ¬í˜„
    - ì„¤ì • íŒŒì¼ì˜ ìŠ¤í™ì„ ì½ì–´ì„œ ë™ì ìœ¼ë¡œ ìƒì„±

**êµ¬í˜„ ì „ëµ**:
1. **ê³µí†µ ë ˆì´ì•„ì›ƒ ë©”ì„œë“œ ì¶”ì¶œ**
   - `_draw_title()`: ì œëª© ì˜ì—­
   - `_draw_employee_info()`: ì§ì› ì •ë³´ ì˜ì—­
   - `_draw_payment_section()`: ì§€ê¸‰ í•­ëª© ì˜ì—­
   - `_draw_deduction_section()`: ê³µì œ í•­ëª© ì˜ì—­
   - `_draw_net_pay()`: ì‹¤ìˆ˜ë ¹ì•¡ ì˜ì—­

2. **ì„¤ì • ê¸°ë°˜ ë Œë”ë§**
   - ì„¤ì • íŒŒì¼ì˜ ì¢Œí‘œ, ìƒ‰ìƒ, í°íŠ¸ ì •ë³´ë¥¼ ì½ì–´ì„œ ë™ì ìœ¼ë¡œ ê·¸ë¦¬ê¸°
   - í•˜ë“œì½”ë”© ìµœì†Œí™”

**ì½”ë“œ êµ¬ì¡° ì˜ˆì‹œ**:
```python
# design_1.py
from reportlab.lib.pagesizes import A4
from reportlab.pdfgen import canvas
from reportlab.lib.units import mm
from .base_design import BaseDesign
from pathlib import Path
import os

class Design1(BaseDesign):
    """ë””ìì¸ 1: ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png ê¸°ë°˜"""
    
    def __init__(self):
        # ì„¤ì • íŒŒì¼ ê²½ë¡œ ì°¾ê¸°
        config_path = self._find_config_path('design_1.yaml')
        super().__init__(config_path)
    
    def _find_config_path(self, filename):
        """ì„¤ì • íŒŒì¼ ê²½ë¡œ ì°¾ê¸°"""
        paths = [
            resource_path(f'templates/designs/configs/{filename}'),
            os.path.join(os.path.dirname(__file__), 'configs', filename),
        ]
        for path in paths:
            if os.path.exists(path):
                return path
        raise FileNotFoundError(f"ì„¤ì • íŒŒì¼ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {filename}")
    
    def generate_pdf(self, payroll_data, employee_data, output_path, period):
        """ë””ìì¸ 1 ìŠ¤íƒ€ì¼ë¡œ PDF ìƒì„±"""
        from ..utils import normalize_path
        
        output_path = normalize_path(output_path)
        output_dir = os.path.dirname(output_path)
        if output_dir and not os.path.exists(output_dir):
            os.makedirs(output_dir, exist_ok=True)
        
        c = canvas.Canvas(output_path, pagesize=A4)
        width, height = A4
        
        # ì„¤ì •ì—ì„œ ë ˆì´ì•„ì›ƒ ì •ë³´ ì½ê¸°
        page_config = self.get_config_value('page', default={})
        layout = self.get_config_value('layout', default={})
        colors = self.get_config_value('colors', default={})
        fonts = self.get_config_value('fonts', default={})
        
        # ê° ì˜ì—­ ê·¸ë¦¬ê¸°
        if 'title' in layout:
            self._draw_title(c, width, height, period, layout['title'], colors, fonts)
        
        if 'employee_info' in layout:
            self._draw_employee_info(c, width, height, employee_data, layout['employee_info'], fonts)
        
        if 'payment_section' in layout:
            self._draw_payment_section(c, width, height, payroll_data, layout['payment_section'], colors, fonts)
        
        if 'deduction_section' in layout:
            self._draw_deduction_section(c, width, height, payroll_data, layout['deduction_section'], colors, fonts)
        
        if 'net_pay' in layout:
            self._draw_net_pay(c, width, height, payroll_data, layout['net_pay'], colors, fonts)
        
        c.save()
        return output_path
    
    def _draw_title(self, canvas, width, height, period, config, colors, fonts):
        """ì œëª© ì˜ì—­ ê·¸ë¦¬ê¸°"""
        # ì„¤ì •ì—ì„œ ê°’ ì½ê¸°
        title_bg = colors.get('title_bg', [0.95, 0.95, 0.95])
        title_font = fonts.get('title', {})
        
        y_pos = height - config.get('y', 30) * mm
        height_val = config.get('height', 20) * mm
        left_margin = config.get('left', 30) * mm
        right_margin = config.get('right', 30) * mm
        content_width = width - left_margin - right_margin
        
        # ë°°ê²½
        canvas.setFillColorRGB(*title_bg)
        canvas.rect(left_margin, y_pos - height_val, content_width, height_val, fill=1, stroke=0)
        
        # í…ìŠ¤íŠ¸
        font_color = title_font.get('color', [0, 0, 0])
        font_size = title_font.get('size', 22)
        canvas.setFillColorRGB(*font_color)
        canvas.setFont(self.font_name, font_size)
        canvas.drawString(left_margin + 10*mm, y_pos - 15*mm, "ê¸‰ì—¬ëª…ì„¸ì„œ")
        
        # ê¸°ê°„
        canvas.setFont(self.font_name, 11)
        canvas.drawString(left_margin + 10*mm, y_pos - 30*mm, f"ì§€ê¸‰ê¸°ê°„: {period}")
    
    # ... ë‚˜ë¨¸ì§€ ë©”ì„œë“œ êµ¬í˜„ (ìœ ì‚¬í•œ íŒ¨í„´)
    
    def generate_excel(self, payroll_data, employee_data, output_path, period):
        """ë””ìì¸ 1 ìŠ¤íƒ€ì¼ë¡œ ì—‘ì…€ ìƒì„±"""
        import openpyxl
        from openpyxl.styles import Font, Alignment, PatternFill, Border, Side
        from ..utils import normalize_path
        
        output_path = normalize_path(output_path)
        output_dir = os.path.dirname(output_path)
        if output_dir and not os.path.exists(output_dir):
            os.makedirs(output_dir, exist_ok=True)
        
        wb = openpyxl.Workbook()
        ws = wb.active
        
        # ì„¤ì •ì—ì„œ ìŠ¤íƒ€ì¼ ì •ë³´ ì½ê¸°
        colors = self.get_config_value('colors', default={})
        fonts = self.get_config_value('fonts', default={})
        layout = self.get_config_value('layout', default={})
        
        # ì œëª©
        ws['A1'] = "ê¸‰ì—¬ëª…ì„¸ì„œ"
        title_font_config = fonts.get('title', {})
        ws['A1'].font = Font(
            name=title_font_config.get('name', self.font_name),
            size=title_font_config.get('size', 22),
            bold=title_font_config.get('bold', True)
        )
        
        title_bg = colors.get('title_bg', [0.95, 0.95, 0.95])
        ws['A1'].fill = PatternFill(
            start_color=self._rgb_to_hex(title_bg),
            end_color=self._rgb_to_hex(title_bg),
            fill_type='solid'
        )
        
        # ê¸°ê°„
        ws['A2'] = f"ì§€ê¸‰ê¸°ê°„: {period}"
        
        # ì§ì› ì •ë³´
        if 'employee_info' in layout:
            info_config = layout['employee_info']
            fields = info_config.get('fields', [])
            row = 4
            ws[f'A{row}'] = f"ì„±ëª…: {employee_data.get('ì´ë¦„', '')}"
            row += 1
            masked_rrn = self.mask_resident_number(employee_data.get('ì£¼ë¯¼ë²ˆí˜¸', ''))
            ws[f'A{row}'] = f"ì£¼ë¯¼ë²ˆí˜¸: {masked_rrn}"
            row += 1
            if employee_data.get('ì…ì‚¬ì¼'):
                ws[f'A{row}'] = f"ì…ì‚¬ì¼: {employee_data.get('ì…ì‚¬ì¼', '')}"
        
        # ì§€ê¸‰ í•­ëª©
        if 'payment_section' in layout:
            payment_config = layout['payment_section']
            fields = payment_config.get('fields', [])
            row = 8
            for field in fields:
                field_name = field.get('name', '')
                if field_name in payroll_data:
                    ws[f'B{row}'] = field_name
                    ws[f'C{row}'] = payroll_data[field_name]
                    row += 1
        
        # ê³µì œ í•­ëª© (ìœ ì‚¬í•œ ë°©ì‹)
        # ì‹¤ìˆ˜ë ¹ì•¡
        
        wb.save(output_path)
        return output_path
    
    def _rgb_to_hex(self, rgb):
        """RGB íŠœí”Œì„ HEX ìƒ‰ìƒ ì½”ë“œë¡œ ë³€í™˜"""
        if isinstance(rgb, list) and len(rgb) == 3:
            return '{:02X}{:02X}{:02X}'.format(
                int(rgb[0] * 255),
                int(rgb[1] * 255),
                int(rgb[2] * 255)
            )
        return 'FFFFFF'  # ê¸°ë³¸ê°’
```

#### 2.3 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] `tests/test_design_1.py` ìƒì„±
  - PDF ìƒì„± í…ŒìŠ¤íŠ¸
  - ì—‘ì…€ ìƒì„± í…ŒìŠ¤íŠ¸
  - ì„¤ì • íŒŒì¼ ë¡œë“œ í…ŒìŠ¤íŠ¸

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 4-6ì‹œê°„

---

### Phase 3: ë””ìì¸ 2 êµ¬í˜„ (4-6ì‹œê°„)

#### 3.1 ì„¤ì • íŒŒì¼ ì‘ì„±
- [ ] `configs/design_2.yaml` ì‘ì„±
  - ë””ìì¸ 2 ë¶„ì„ ê²°ê³¼ë¥¼ YAML í˜•ì‹ìœ¼ë¡œ ì‘ì„±

#### 3.2 ë””ìì¸ 2 í´ë˜ìŠ¤ êµ¬í˜„
- [ ] `design_2.py` ìƒì„±
- [ ] `Design2` í´ë˜ìŠ¤ êµ¬í˜„
  - `Design1`ê³¼ ë™ì¼í•œ êµ¬ì¡°
  - ì„¤ì • íŒŒì¼ë§Œ ë‹¤ë¦„

**êµ¬í˜„ ì „ëµ**:
- `Design1`ì˜ ì½”ë“œë¥¼ ë³µì‚¬í•˜ì—¬ `Design2` ìƒì„±
- ì„¤ì • íŒŒì¼ë§Œ `design_2.yaml`ë¡œ ë³€ê²½
- ê³µí†µ ë¡œì§ì€ `BaseDesign`ì— ìˆìœ¼ë¯€ë¡œ ì¤‘ë³µ ìµœì†Œí™”

#### 3.3 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] `tests/test_design_2.py` ìƒì„±

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-4ì‹œê°„ (Design1 ê¸°ë°˜ìœ¼ë¡œ ë¹ ë¥´ê²Œ êµ¬í˜„ ê°€ëŠ¥)

---

### Phase 4: ê¸°ì¡´ ì½”ë“œ í†µí•© (1-2ì‹œê°„)

#### 4.1 PDFGenerator ìˆ˜ì •
- [ ] `pdf_generator.py` ìˆ˜ì •
  - `generate_payslip()` ë©”ì„œë“œì— `design_name` íŒŒë¼ë¯¸í„° ì¶”ê°€
  - ë””ìì¸ ì„ íƒ ì‹œ `DesignFactory` ì‚¬ìš©
  - ê¸°ì¡´ ë¡œì§ì€ ê·¸ëŒ€ë¡œ ìœ ì§€ (í•˜ìœ„ í˜¸í™˜ì„±)

**ìˆ˜ì • ì˜ˆì‹œ**:
```python
# pdf_generator.py
def generate_payslip(self, payroll_data, employee_data, output_path, period, 
                     use_template=True, design_name=None):
    """ê¸‰ì—¬ëª…ì„¸ì„œ PDF ìƒì„±
    
    Args:
        payroll_data (dict): calculator.calculate_deductions()ì˜ ë°˜í™˜ê°’
        employee_data (dict): ì§ì› ì •ë³´
        output_path (str): ì¶œë ¥ íŒŒì¼ ê²½ë¡œ
        period (str): ê¸‰ì—¬ ê¸°ê°„
        use_template (bool): Trueë©´ ì—‘ì…€ í…œí”Œë¦¿ ì‚¬ìš© (ê¸°ë³¸ê°’: True)
        design_name (str): ë””ìì¸ ì´ë¦„ ('design_1', 'design_2', None)
    """
    # ë””ìì¸ ì„ íƒ ì‹œ ë””ìì¸ í´ë˜ìŠ¤ ì‚¬ìš©
    if design_name:
        try:
            from .templates.designs.design_factory import DesignFactory
            design = DesignFactory.get_design(design_name)
            if design:
                return design.generate_pdf(payroll_data, employee_data, output_path, period)
        except Exception as e:
            logger.warning(f"ë””ìì¸ ìƒì„± ì‹¤íŒ¨ ({design_name}), ê¸°ë³¸ ë°©ì‹ ì‚¬ìš©: {e}")
    
    # ê¸°ì¡´ ë¡œì§ (ë³€ê²½ ì—†ìŒ)
    if use_template:
        try:
            return self.generate_payslip_from_template(payroll_data, employee_data, output_path, period)
        except Exception as e:
            logger.warning(f"í…œí”Œë¦¿ ê¸°ë°˜ PDF ìƒì„± ì‹¤íŒ¨, ì½”ë“œ ê¸°ë°˜ ìƒì„±ìœ¼ë¡œ ì „í™˜: {str(e)}")
            return self._generate_payslip_code_based(payroll_data, employee_data, output_path, period)
    else:
        return self._generate_payslip_code_based(payroll_data, employee_data, output_path, period)
```

#### 4.2 ExcelHandler ìˆ˜ì •
- [ ] `excel_handler.py` ìˆ˜ì •
  - `write_payroll()` ë©”ì„œë“œì— `design_name` íŒŒë¼ë¯¸í„° ì¶”ê°€
  - ë™ì¼í•œ ë°©ì‹ìœ¼ë¡œ í†µí•©

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì‹œê°„

---

### Phase 5: ì›¹ ì¸í„°í˜ì´ìŠ¤ ê°œì„  (2-3ì‹œê°„)

#### 5.1 í¼ ìˆ˜ì •
- [ ] `app/forms/payroll_forms.py` ìˆ˜ì •
  - ë””ìì¸ ì„ íƒ í•„ë“œ ì¶”ê°€

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# payroll_forms.py
from flask_wtf import FlaskForm
from wtforms import SelectField

class EmployeeInputForm(FlaskForm):
    # ... ê¸°ì¡´ í•„ë“œë“¤ ...
    
    design_name = SelectField(
        'ë””ìì¸ ì„ íƒ',
        choices=[
            ('default', 'ê¸°ë³¸ ë””ìì¸'),
            ('design_1', 'ë””ìì¸ 1'),
            ('design_2', 'ë””ìì¸ 2'),
        ],
        default='default',
        description='ê¸‰ì—¬ëª…ì„¸ì„œ ë””ìì¸ì„ ì„ íƒí•˜ì„¸ìš”'
    )
```

#### 5.2 ë¼ìš°íŠ¸ ìˆ˜ì •
- [ ] `app/routes/payroll.py` ìˆ˜ì •
  - í¼ì—ì„œ `design_name` ê°’ ë°›ê¸°
  - PDF/ì—‘ì…€ ìƒì„± ì‹œ `design_name` ì „ë‹¬

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# payroll.py
design_name = form.design_name.data if hasattr(form, 'design_name') else None

# PDF ìƒì„±
pdf_generator.generate_payslip(
    payroll_data, employee_data, pdf_path, period,
    design_name=design_name
)

# ì—‘ì…€ ìƒì„±
excel_handler.write_payroll(
    payroll_data, excel_path, employee_data, period,
    design_name=design_name
)
```

#### 5.3 í…œí”Œë¦¿ ìˆ˜ì •
- [ ] `web/templates/payroll/input_form.html` ìˆ˜ì •
  - ë””ìì¸ ì„ íƒ ë“œë¡­ë‹¤ìš´ ì¶”ê°€
  - ë””ìì¸ ë¯¸ë¦¬ë³´ê¸° ì´ë¯¸ì§€ í‘œì‹œ (ì„ íƒì‚¬í•­)

**HTML ì˜ˆì‹œ**:
```html
<div class="form-group">
    <label for="design_name">ë””ìì¸ ì„ íƒ</label>
    <select name="design_name" id="design_name" class="form-control">
        <option value="default">ê¸°ë³¸ ë””ìì¸</option>
        <option value="design_1">ë””ìì¸ 1</option>
        <option value="design_2">ë””ìì¸ 2</option>
    </select>
    <small class="form-text text-muted">
        ê¸‰ì—¬ëª…ì„¸ì„œ ë””ìì¸ì„ ì„ íƒí•˜ì„¸ìš”
    </small>
</div>
```

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 2-3ì‹œê°„

---

### Phase 6: ë°ìŠ¤í¬í†± ì¸í„°í˜ì´ìŠ¤ ê°œì„  (1-2ì‹œê°„)

#### 6.1 GUI ìˆ˜ì •
- [ ] `main.py` ìˆ˜ì •
  - ë””ìì¸ ì„ íƒ ì˜µì…˜ ì¶”ê°€ (Combobox)

**ì½”ë“œ ì˜ˆì‹œ**:
```python
# main.py
# ë””ìì¸ ì„ íƒ
self.design_var = tk.StringVar(value='default')
design_frame = ttk.Frame(self.output_frame)
design_frame.pack(fill='x', pady=5)
ttk.Label(design_frame, text="ë””ìì¸:").pack(side='left', padx=5)
design_combo = ttk.Combobox(
    design_frame,
    textvariable=self.design_var,
    values=['ê¸°ë³¸', 'ë””ìì¸ 1', 'ë””ìì¸ 2'],
    state='readonly',
    width=15
)
design_combo.pack(side='left')
```

#### 6.2 ìƒì„± ë¡œì§ ìˆ˜ì •
- [ ] `generate_payroll()` ë©”ì„œë“œ ìˆ˜ì •
  - ì„ íƒëœ ë””ìì¸ ê°’ ê°€ì ¸ì˜¤ê¸°
  - PDF/ì—‘ì…€ ìƒì„± ì‹œ `design_name` ì „ë‹¬

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 1-2ì‹œê°„

---

### Phase 7: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ (3-4ì‹œê°„)

#### 7.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] ë””ìì¸ íŒ©í† ë¦¬ í…ŒìŠ¤íŠ¸
- [ ] ê° ë””ìì¸ í´ë˜ìŠ¤ í…ŒìŠ¤íŠ¸
- [ ] ì„¤ì • íŒŒì¼ ë¡œë“œ í…ŒìŠ¤íŠ¸
- [ ] ê¸°ì¡´ ê¸°ëŠ¥ í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸

#### 7.2 í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì›¹ ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸
  - ë””ìì¸ ì„ íƒ ì—†ì´ ìƒì„± (ê¸°ë³¸ ë™ì‘ í™•ì¸)
  - ë””ìì¸ 1 ì„ íƒí•˜ì—¬ ìƒì„±
  - ë””ìì¸ 2 ì„ íƒí•˜ì—¬ ìƒì„±
- [ ] ë°ìŠ¤í¬í†± ì¸í„°í˜ì´ìŠ¤ í…ŒìŠ¤íŠ¸
  - ë™ì¼í•œ ì‹œë‚˜ë¦¬ì˜¤

#### 7.3 ì¶œë ¥ íŒŒì¼ ê²€ì¦
- [ ] ê° ë””ìì¸ë³„ PDF ì¶œë ¥ í™•ì¸
- [ ] ê° ë””ìì¸ë³„ ì—‘ì…€ ì¶œë ¥ í™•ì¸
- [ ] ìƒ˜í”Œ ì´ë¯¸ì§€ì™€ ë¹„êµ ê²€ì¦

**ì˜ˆìƒ ì†Œìš” ì‹œê°„**: 3-4ì‹œê°„

---

## ğŸ“Š ì˜ˆìƒ ì†Œìš” ì‹œê°„ (ì‹¤í˜„ ê°€ëŠ¥ ë²„ì „)

| Phase | ì‘ì—… ë‚´ìš© | ì˜ˆìƒ ì‹œê°„ |
|-------|----------|----------|
| Phase 0 | ì¤€ë¹„ ì‘ì—… (ì´ë¯¸ì§€ ë¶„ì„, ì„¤ì • íŒŒì¼ ì‘ì„±) | 2-3ì‹œê°„ |
| Phase 1 | ê¸°ë³¸ êµ¬ì¡° êµ¬ì¶• | 2-3ì‹œê°„ |
| Phase 2 | ë””ìì¸ 1 êµ¬í˜„ | 4-6ì‹œê°„ |
| Phase 3 | ë””ìì¸ 2 êµ¬í˜„ | 3-4ì‹œê°„ |
| Phase 4 | ê¸°ì¡´ ì½”ë“œ í†µí•© | 1-2ì‹œê°„ |
| Phase 5 | ì›¹ ì¸í„°í˜ì´ìŠ¤ ê°œì„  | 2-3ì‹œê°„ |
| Phase 6 | ë°ìŠ¤í¬í†± ì¸í„°í˜ì´ìŠ¤ ê°œì„  | 1-2ì‹œê°„ |
| Phase 7 | í…ŒìŠ¤íŠ¸ ë° ê²€ì¦ | 3-4ì‹œê°„ |
| **ì´ê³„** | | **18-27ì‹œê°„** |

---

## ğŸ¯ í•µì‹¬ ê°œì„  ì‚¬í•­ (v1.0 â†’ v2.0)

### 1. ì—‘ì…€â†’PDF ë³€í™˜ ì œê±°
- **v1.0**: ì—‘ì…€ í…œí”Œë¦¿ â†’ ì—‘ì…€ ìƒì„± â†’ PDF ë³€í™˜ (ë³µì¡, í”Œë«í¼ ì˜ì¡´)
- **v2.0**: ì„¤ì • íŒŒì¼ â†’ reportlab ì§ì ‘ êµ¬í˜„ (ë‹¨ìˆœ, í”Œë«í¼ ë…ë¦½)

### 2. ì„¤ì • ê¸°ë°˜ ë””ìì¸ ê´€ë¦¬
- **v1.0**: ì—‘ì…€ í…œí”Œë¦¿ íŒŒì¼ ì˜ì¡´
- **v2.0**: YAML ì„¤ì • íŒŒì¼ë¡œ ë””ìì¸ ìŠ¤í™ ê´€ë¦¬ (ì½”ë“œ ìˆ˜ì • ì—†ì´ ë””ìì¸ ë³€ê²½)

### 3. ì½”ë“œ ì¬ì‚¬ìš©ì„± í–¥ìƒ
- **v1.0**: ê° ë””ìì¸ë³„ë¡œ ë…ë¦½ì ì¸ ì½”ë“œ
- **v2.0**: ê³µí†µ ë¡œì§ì„ `BaseDesign`ì— ì¶”ì¶œ, ì„¤ì •ë§Œ ë‹¤ë¦„

### 4. í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ì„± í–¥ìƒ
- **v1.0**: ì—‘ì…€ íŒŒì¼ ì˜ì¡´ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ë³µì¡
- **v2.0**: ì„¤ì • íŒŒì¼ ê¸°ë°˜ìœ¼ë¡œ ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ìš©ì´

---

## ğŸ“ ì„¤ì • íŒŒì¼ êµ¬ì¡° ìƒì„¸

### design_1.yaml ì „ì²´ êµ¬ì¡° ì˜ˆì‹œ

```yaml
design_name: "ë””ìì¸ 1"
description: "ê¸‰ì—¬ëª…ì„¸ì„œ_sample.png ê¸°ë°˜"
version: "1.0"

# í˜ì´ì§€ ì„¤ì •
page:
  size: "A4"
  orientation: "portrait"
  margins:
    top: 30
    bottom: 20
    left: 30
    right: 30
    unit: "mm"

# í°íŠ¸ ì„¤ì •
fonts:
  title:
    name: "NanumGothic"
    size: 22
    bold: true
    color: [0, 0, 0]  # RGB 0-1 ë²”ìœ„
  header:
    name: "NanumGothic"
    size: 12
    bold: true
    color: [1, 1, 1]  # í°ìƒ‰
  body:
    name: "NanumGothic"
    size: 10
    bold: false
    color: [0, 0, 0]
  total:
    name: "NanumGothic"
    size: 11
    bold: true
    color: [0, 0, 0]

# ìƒ‰ìƒ ì„¤ì • (RGB 0-1 ë²”ìœ„)
colors:
  title_bg: [0.95, 0.95, 0.95]      # ì—°í•œ íšŒìƒ‰
  title_border: [0.7, 0.7, 0.7]      # íšŒìƒ‰ í…Œë‘ë¦¬
  employee_info_bg: [0.98, 0.98, 0.98]  # ë§¤ìš° ì—°í•œ íšŒìƒ‰
  employee_info_border: [0.8, 0.8, 0.8]
  header_bg: [0.2, 0.4, 0.8]         # íŒŒë€ìƒ‰
  header_border: [0.2, 0.4, 0.8]
  row_bg_even: [0.98, 0.98, 0.98]    # ì§ìˆ˜ í–‰ ë°°ê²½
  row_bg_odd: [1, 1, 1]               # í™€ìˆ˜ í–‰ ë°°ê²½
  row_border: [0.9, 0.9, 0.9]
  total_bg: [0.9, 0.95, 1.0]          # ì—°í•œ íŒŒë€ìƒ‰
  total_border: [0.2, 0.4, 0.8]

# ë ˆì´ì•„ì›ƒ ì„¤ì • (mm ë‹¨ìœ„, ìƒë‹¨ì—ì„œ)
layout:
  title:
    y: 30
    height: 20
    left: 30
    right: 30
    period_y_offset: -15
  
  employee_info:
    y: 70
    height: 50
    left: 30
    right: 30
    fields:
      - name: "ì´ë¦„"
        label: "ì„±ëª…:"
        y_offset: 0
        x_offset: 10
      - name: "ì£¼ë¯¼ë²ˆí˜¸"
        label: "ì£¼ë¯¼ë²ˆí˜¸:"
        y_offset: -12
        x_offset: 10
      - name: "ì…ì‚¬ì¼"
        label: "ì…ì‚¬ì¼:"
        y_offset: -24
        x_offset: 10
  
  payment_section:
    y: 130
    header_height: 8
    row_height: 10
    left: 30
    right: 30
    column_widths:
      label: 0.6  # ì „ì²´ ë„ˆë¹„ì˜ 60%
      value: 0.4  # ì „ì²´ ë„ˆë¹„ì˜ 40%
    fields:
      - name: "ê¸°ë³¸ê¸‰"
        y_offset: 0
      - name: "ì—°ì¥ê·¼ë¬´ìˆ˜ë‹¹"
        y_offset: -10
      - name: "ìƒì—¬ê¸ˆ"
        y_offset: -20
      - name: "ì´ì§€ê¸‰ì•¡"
        y_offset: -30
        is_total: true
  
  deduction_section:
    y: 180
    header_height: 8
    row_height: 10
    left: 30
    right: 30
    column_widths:
      label: 0.6
      value: 0.4
    fields:
      - name: "êµ­ë¯¼ì—°ê¸ˆ"
        y_offset: 0
      - name: "ê±´ê°•ë³´í—˜"
        y_offset: -10
      - name: "ì¥ê¸°ìš”ì–‘"
        y_offset: -20
      - name: "ê³ ìš©ë³´í—˜"
        y_offset: -30
      - name: "ì†Œë“ì„¸"
        y_offset: -40
      - name: "ì§€ë°©ì†Œë“ì„¸"
        y_offset: -50
      - name: "ì´ê³µì œì•¡"
        y_offset: -60
        is_total: true
  
  net_pay:
    y: 250
    height: 15
    left: 30
    right: 30
    label: "ì‹¤ìˆ˜ë ¹ì•¡:"
```

---

## ğŸ”§ ì‹¤ì œ êµ¬í˜„ ì½”ë“œ ì˜ˆì‹œ

### BaseDesignì˜ ê³µí†µ ë©”ì„œë“œ

```python
# base_design.py (ì¶”ê°€ ë©”ì„œë“œ)
class BaseDesign(ABC):
    # ... ê¸°ì¡´ ì½”ë“œ ...
    
    def _draw_section_header(self, canvas, x, y, width, height, text, colors, fonts):
        """ì„¹ì…˜ í—¤ë” ê·¸ë¦¬ê¸° (ê³µí†µ ë©”ì„œë“œ)"""
        header_bg = colors.get('header_bg', [0.2, 0.4, 0.8])
        header_font = fonts.get('header', {})
        
        # ë°°ê²½
        canvas.setFillColorRGB(*header_bg)
        canvas.rect(x, y - height, width, height, fill=1, stroke=0)
        
        # í…ìŠ¤íŠ¸
        font_color = header_font.get('color', [1, 1, 1])
        font_size = header_font.get('size', 12)
        canvas.setFillColorRGB(*font_color)
        canvas.setFont(self.font_name, font_size)
        canvas.drawString(x + 5*mm, y - height/2 - 3*mm, text)
    
    def _draw_data_row(self, canvas, x, y, width, row_height, label, value, 
                       colors, fonts, is_even=True, is_total=False):
        """ë°ì´í„° í–‰ ê·¸ë¦¬ê¸° (ê³µí†µ ë©”ì„œë“œ)"""
        # ë°°ê²½ìƒ‰ ì„ íƒ
        if is_total:
            bg_color = colors.get('total_bg', [0.9, 0.95, 1.0])
            font_config = fonts.get('total', {})
        else:
            bg_color = colors.get('row_bg_even' if is_even else 'row_bg_odd', [1, 1, 1])
            font_config = fonts.get('body', {})
        
        # ë°°ê²½
        canvas.setFillColorRGB(*bg_color)
        canvas.rect(x, y - row_height, width, row_height, fill=1, stroke=0)
        
        # í…Œë‘ë¦¬
        border_color = colors.get('row_border', [0.9, 0.9, 0.9])
        canvas.setStrokeColorRGB(*border_color)
        canvas.setLineWidth(0.5)
        canvas.line(x, y - row_height, x + width, y - row_height)
        
        # í…ìŠ¤íŠ¸
        font_color = font_config.get('color', [0, 0, 0])
        font_size = font_config.get('size', 10)
        canvas.setFillColorRGB(*font_color)
        canvas.setFont(self.font_name, font_size)
        
        # ë ˆì´ë¸”
        label_width = width * 0.6
        canvas.drawString(x + 5*mm, y - row_height/2 - 3*mm, label)
        
        # ê°’
        canvas.drawString(x + label_width + 5*mm, y - row_height/2 - 3*mm, 
                         self.format_currency(value))
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ì „ëµ

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ

```python
# tests/test_design_1.py
import unittest
import tempfile
import os
from payroll_generator.templates.designs.design_1 import Design1

class TestDesign1(unittest.TestCase):
    def setUp(self):
        self.design = Design1()
        self.payroll_data = {
            'ê¸°ë³¸ê¸‰': 3000000,
            'ì—°ì¥ê·¼ë¬´ìˆ˜ë‹¹': 250000,
            'ìƒì—¬ê¸ˆ': 500000,
            'ì´ì§€ê¸‰ì•¡': 3750000,
            'êµ­ë¯¼ì—°ê¸ˆ': 135000,
            'ê±´ê°•ë³´í—˜': 106350,
            # ... ë‚˜ë¨¸ì§€
            'ì‹¤ìˆ˜ë ¹ì•¡': 3000000
        }
        self.employee_data = {
            'ì´ë¦„': 'í™ê¸¸ë™',
            'ì£¼ë¯¼ë²ˆí˜¸': '123456-1234567',
            'ì…ì‚¬ì¼': '2024-01-01'
        }
    
    def test_config_load(self):
        """ì„¤ì • íŒŒì¼ ë¡œë“œ í…ŒìŠ¤íŠ¸"""
        self.assertIsNotNone(self.design.config)
        self.assertEqual(self.design.config['design_name'], 'ë””ìì¸ 1')
    
    def test_generate_pdf(self):
        """PDF ìƒì„± í…ŒìŠ¤íŠ¸"""
        with tempfile.NamedTemporaryFile(suffix='.pdf', delete=False) as f:
            output_path = f.name
        
        try:
            result = self.design.generate_pdf(
                self.payroll_data,
                self.employee_data,
                output_path,
                '2025-01'
            )
            self.assertTrue(os.path.exists(result))
            self.assertGreater(os.path.getsize(result), 0)
        finally:
            if os.path.exists(output_path):
                os.unlink(output_path)
    
    def test_generate_excel(self):
        """ì—‘ì…€ ìƒì„± í…ŒìŠ¤íŠ¸"""
        with tempfile.NamedTemporaryFile(suffix='.xlsx', delete=False) as f:
            output_path = f.name
        
        try:
            result = self.design.generate_excel(
                self.payroll_data,
                self.employee_data,
                output_path,
                '2025-01'
            )
            self.assertTrue(os.path.exists(result))
            self.assertGreater(os.path.getsize(result), 0)
        finally:
            if os.path.exists(output_path):
                os.unlink(output_path)
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­ ë° ì œì•½ì‚¬í•­

### 1. ì„¤ì • íŒŒì¼ í˜•ì‹
- YAML í˜•ì‹ ì‚¬ìš© (ì½ê¸° ì‰¬ì›€)
- RGB ìƒ‰ìƒì€ 0-1 ë²”ìœ„ë¡œ ì •ê·œí™” (reportlab í˜¸í™˜)
- ì¢Œí‘œëŠ” mm ë‹¨ìœ„ë¡œ í†µì¼

### 2. í°íŠ¸ ì˜ì¡´ì„±
- í•œê¸€ í°íŠ¸(NanumGothic)ê°€ ì„¤ì¹˜ë˜ì–´ ìˆì–´ì•¼ í•¨
- í°íŠ¸ê°€ ì—†ìœ¼ë©´ ê¸°ë³¸ í°íŠ¸ë¡œ í´ë°± (ê¸°ì¡´ ë¡œì§ê³¼ ë™ì¼)

### 3. ë ˆì´ì•„ì›ƒ ë³µì¡ë„
- ë³µì¡í•œ ë ˆì´ì•„ì›ƒì€ ì„¤ì • íŒŒì¼ë¡œ í‘œí˜„í•˜ê¸° ì–´ë ¤ìš¸ ìˆ˜ ìˆìŒ
- í•„ìš”ì‹œ ì½”ë“œì— í•˜ë“œì½”ë”© ê°€ëŠ¥ (ì„¤ì • íŒŒì¼ê³¼ í˜¼í•© ì‚¬ìš©)

### 4. ì„±ëŠ¥ ê³ ë ¤
- ì„¤ì • íŒŒì¼ì€ í•œ ë²ˆë§Œ ë¡œë“œ (ì‹±ê¸€í†¤ íŒ¨í„´)
- PDF/ì—‘ì…€ ìƒì„± ì‹œ ì„¤ì • íŒŒì¼ ì¬ì½ê¸° ì—†ìŒ

---

## ğŸ“š í™•ì¥ì„± ê³ ë ¤

### í–¥í›„ ë””ìì¸ ì¶”ê°€ ì‹œ

1. **ìƒˆ ë””ìì¸ ì¶”ê°€**:
   - `configs/design_3.yaml` ì‘ì„±
   - `design_3.py` ìƒì„± (Design1 ë³µì‚¬ í›„ ìˆ˜ì •)
   - `DesignFactory`ì— ë“±ë¡

2. **ë””ìì¸ ìˆ˜ì •**:
   - ì„¤ì • íŒŒì¼ë§Œ ìˆ˜ì •í•˜ë©´ ë¨
   - ì½”ë“œ ìˆ˜ì • ë¶ˆí•„ìš”

3. **ë””ìì¸ ì‚­ì œ**:
   - ì„¤ì • íŒŒì¼ ë° í´ë˜ìŠ¤ íŒŒì¼ ì‚­ì œ
   - `DesignFactory`ì—ì„œ ì œê±°

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸ (ì‹¤í˜„ ê°€ëŠ¥ ë²„ì „)

### Phase 0: ì¤€ë¹„ ì‘ì—…
- [ ] ìƒ˜í”Œ ì´ë¯¸ì§€ ë¶„ì„ ë° ìŠ¤í™ ì •ì˜
- [ ] `design_1.yaml` ì‘ì„±
- [ ] `design_2.yaml` ì‘ì„±

### Phase 1: ê¸°ë³¸ êµ¬ì¡° êµ¬ì¶•
- [ ] ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [ ] `base_design.py` êµ¬í˜„
- [ ] `design_factory.py` êµ¬í˜„
- [ ] `PyYAML` ì˜ì¡´ì„± ì¶”ê°€

### Phase 2: ë””ìì¸ 1 êµ¬í˜„
- [ ] `design_1.py` êµ¬í˜„
- [ ] `generate_pdf()` ë©”ì„œë“œ êµ¬í˜„
- [ ] `generate_excel()` ë©”ì„œë“œ êµ¬í˜„
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

### Phase 3: ë””ìì¸ 2 êµ¬í˜„
- [ ] `design_2.py` êµ¬í˜„
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±

### Phase 4: ê¸°ì¡´ ì½”ë“œ í†µí•©
- [ ] `PDFGenerator.generate_payslip()` ìˆ˜ì •
- [ ] `ExcelHandler.write_payroll()` ìˆ˜ì •

### Phase 5: ì›¹ ì¸í„°í˜ì´ìŠ¤ ê°œì„ 
- [ ] í¼ ìˆ˜ì •
- [ ] ë¼ìš°íŠ¸ ìˆ˜ì •
- [ ] í…œí”Œë¦¿ ìˆ˜ì •

### Phase 6: ë°ìŠ¤í¬í†± ì¸í„°í˜ì´ìŠ¤ ê°œì„ 
- [ ] GUI ìˆ˜ì •
- [ ] ìƒì„± ë¡œì§ ìˆ˜ì •

### Phase 7: í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
- [ ] í†µí•© í…ŒìŠ¤íŠ¸
- [ ] ì¶œë ¥ íŒŒì¼ ê²€ì¦

---

## ğŸ¯ ì„±ê³µ ê¸°ì¤€

### ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­
- âœ… ì‚¬ìš©ìê°€ ë‘ ê°€ì§€ ë””ìì¸ ì¤‘ ì„ íƒ ê°€ëŠ¥
- âœ… ì„ íƒí•œ ë””ìì¸ìœ¼ë¡œ PDF/ì—‘ì…€ ìƒì„± ê°€ëŠ¥
- âœ… ë””ìì¸ ì„ íƒ ì—†ì´ë„ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ ë™ì‘
- âœ… ì›¹ ë° ë°ìŠ¤í¬í†± ì¸í„°í˜ì´ìŠ¤ ëª¨ë‘ ì§€ì›

### í’ˆì§ˆ ìš”êµ¬ì‚¬í•­
- âœ… ê¸°ì¡´ ê¸°ëŠ¥ ì •ìƒ ë™ì‘ (íšŒê·€ í…ŒìŠ¤íŠ¸ í†µê³¼)
- âœ… ìƒì„±ëœ íŒŒì¼ì´ ìƒ˜í”Œ ì´ë¯¸ì§€ì™€ ìœ ì‚¬í•œ ìŠ¤íƒ€ì¼
- âœ… ì„¤ì • íŒŒì¼ë§Œ ìˆ˜ì •í•˜ì—¬ ë””ìì¸ ë³€ê²½ ê°€ëŠ¥
- âœ… ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ 80% ì´ìƒ
- âœ… í”Œë«í¼ ë…ë¦½ì  (Windows, macOS, Linux)

---

## ğŸ“Œ ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ ì‹œì‘ ê°€ëŠ¥**:
   - Phase 0: ìƒ˜í”Œ ì´ë¯¸ì§€ ë¶„ì„ ë° ì„¤ì • íŒŒì¼ ì‘ì„±
   - ì—‘ì…€ í…œí”Œë¦¿ ì œì‘ ë¶ˆí•„ìš” (ì„¤ì • íŒŒì¼ë¡œ ëŒ€ì²´)

2. **êµ¬í˜„ ì‹œì‘**:
   - Phase 1ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ ì§„í–‰
   - ê° Phase ì™„ë£Œ í›„ í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

3. **í™•ì¥ ê°€ëŠ¥**:
   - í–¥í›„ ë””ìì¸ 3, 4 ì¶”ê°€ ì‹œ ì„¤ì • íŒŒì¼ë§Œ ì¶”ê°€í•˜ë©´ ë¨

---

**ì‘ì„±ì**: AI Assistant  
**ì‘ì„±ì¼**: 2025-12-12  
**ë²„ì „**: 2.0 (í”„ë¡œ ê°œë°œì ê´€ì  ê°œì„ )  
**ìƒíƒœ**: âœ… ì‹¤í˜„ ê°€ëŠ¥í•œ ì‹¤í–‰ê³„íš ì‘ì„± ì™„ë£Œ
