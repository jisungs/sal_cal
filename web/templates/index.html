{% extends "base.html" %}

{% block title %}ê¸‰ì—¬ëª…ì„¸ì„œ ìë™ìƒì„±ê¸° - íŒŒì¼ ì—…ë¡œë“œ{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="card-title mb-0">ğŸ“„ ê¸‰ì—¬ëª…ì„¸ì„œ ìƒì„±</h3>
            </div>
            <div class="card-body">
                <form id="uploadForm" enctype="multipart/form-data">
                    <div class="mb-3">
                        <label for="file" class="form-label">ì§ì› ì •ë³´ ì—‘ì…€ íŒŒì¼</label>
                        <input type="file" class="form-control" id="file" name="file" 
                               accept=".xlsx,.xls" required>
                        <div class="form-text">
                            ì—‘ì…€ íŒŒì¼(.xlsx, .xls)ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ìµœëŒ€ 16MB)
                        </div>
                    </div>

                    <div class="mb-3">
                        <label for="period" class="form-label">ì§€ê¸‰ ê¸°ê°„</label>
                        <input type="text" class="form-control" id="period" name="period" 
                               value="{{ current_date }}" placeholder="2025-01" required>
                        <div class="form-text">í˜•ì‹: YYYY-MM (ì˜ˆ: 2025-01)</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ì¶œë ¥ í˜•ì‹</label>
                        <div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="format" 
                                       id="format_excel" value="excel">
                                <label class="form-check-label" for="format_excel">ì—‘ì…€</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="format" 
                                       id="format_pdf" value="pdf">
                                <label class="form-check-label" for="format_pdf">PDF</label>
                            </div>
                            <div class="form-check form-check-inline">
                                <input class="form-check-input" type="radio" name="format" 
                                       id="format_both" value="both" checked>
                                <label class="form-check-label" for="format_both">ë‘˜ ë‹¤</label>
                            </div>
                        </div>
                    </div>

                    <div id="errorMessage" class="alert alert-danger d-none" role="alert"></div>
                    <div id="successMessage" class="alert alert-success d-none" role="alert"></div>

                    <button type="submit" class="btn btn-primary btn-lg w-100" id="submitBtn">
                        <span id="submitText">ìƒì„±í•˜ê¸°</span>
                        <span id="submitSpinner" class="spinner-border spinner-border-sm d-none" 
                              role="status" aria-hidden="true"></span>
                    </button>
                </form>
            </div>
        </div>

        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">ğŸ“‹ ì‚¬ìš© ë°©ë²•</h5>
                <ol>
                    <li>ì§ì› ì •ë³´ê°€ í¬í•¨ëœ ì—‘ì…€ íŒŒì¼ì„ ì¤€ë¹„í•˜ì„¸ìš”.</li>
                    <li>í•„ìˆ˜ ì»¬ëŸ¼: ì´ë¦„, ì£¼ë¯¼ë²ˆí˜¸, ì…ì‚¬ì¼, ê¸°ë³¸ê¸‰, ë¶€ì–‘ê°€ì¡±ìˆ˜</li>
                    <li>íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê³  ì§€ê¸‰ ê¸°ê°„ì„ ì…ë ¥í•˜ì„¸ìš”.</li>
                    <li>ì¶œë ¥ í˜•ì‹ì„ ì„ íƒí•˜ê³  ìƒì„±í•˜ê¸° ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</li>
                </ol>
                <p class="text-muted mb-0">
                    <small>ìƒ˜í”Œ í…œí”Œë¦¿ì€ <code>payroll_generator/templates/employee_template.xlsx</code>ë¥¼ ì°¸ê³ í•˜ì„¸ìš”.</small>
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script>
    // í˜„ì¬ ë‚ ì§œë¥¼ ê¸°ë³¸ê°’ìœ¼ë¡œ ì„¤ì •
    document.addEventListener('DOMContentLoaded', function() {
        const now = new Date();
        const year = now.getFullYear();
        const month = String(now.getMonth() + 1).padStart(2, '0');
        document.getElementById('period').value = `${year}-${month}`;
    });
</script>
{% endblock %}

